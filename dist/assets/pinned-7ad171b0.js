import{a as V,j as e,r as l}from"./client-0340cb23.js";function X(){const[j,w]=l.useState([]),[y,J]=l.useState(""),[p,O]=l.useState(""),[S,Q]=l.useState(!1);l.useEffect(()=>{var n;(n=window.electronAPI)==null||n.onPinnedItemsUpdated(r=>{w(s=>{const c=JSON.stringify(r||[]),a=JSON.stringify(s||[]);return c!==a?r||[]:s})})},[]);const d=n=>(n||"").toString().toLowerCase(),b=(n,r)=>{const s=n??"",c=r==null?void 0:r.trim();if(!c)return s;try{const a=new RegExp(`(${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"ig");return s.split(a).map((g,m)=>a.test(g)?e.jsx("mark",{style:{backgroundColor:"#ffc107",color:"#000",padding:"0 2px",borderRadius:"2px"},children:g},m):e.jsx("span",{children:g},m))}catch{return s}},Y=n=>{navigator.clipboard.writeText(n)};return e.jsxs("div",{style:{margin:0,backgroundColor:"#1e1e1e",color:"#fff",height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{backgroundColor:"#333",color:"#fff",padding:"0.5rem 1rem",fontWeight:"bold",WebkitAppRegion:"drag",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:1e3},children:["Pinned Messages",e.jsxs("div",{style:{WebkitAppRegion:"no-drag",display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{value:p,onChange:n=>O(n.target.value),placeholder:"Search user",style:{padding:"0.25rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1e1e1e",color:"#fff"}}),e.jsx("input",{value:y,onChange:n=>J(n.target.value),placeholder:"Search text",style:{padding:"0.25rem",borderRadius:"4px",border:"1px solid #444",backgroundColor:"#1e1e1e",color:"#fff"}}),e.jsx("span",{className:"material-icons",style:{fontSize:"35px",cursor:"pointer",color:S?"#FFA500":"#007BFF"},onClick:()=>Q(n=>!n),title:"Toggle filter mode",children:"filter_list"}),e.jsx(l.Suspense,{fallback:e.jsx("span",{style:{fontSize:"1.2rem"},children:"❌"}),children:e.jsx("button",{onClick:()=>window.close(),style:{background:"none",border:"none",color:"#fff",cursor:"pointer"},title:"Close",children:"❌"})})]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0.5rem"},children:j.length===0?e.jsx("div",{style:{color:"#ccc",textAlign:"center",marginTop:"2rem"},children:"No pinned messages yet."}):e.jsxs("table",{style:{width:"100%",tableLayout:"auto",borderCollapse:"separate",borderSpacing:"5px 6px"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"45px"}}),"  ",e.jsx("col",{}),"                            ",e.jsx("col",{}),"                            ",e.jsx("col",{style:{minWidth:"300px"}})," ",e.jsx("col",{style:{width:"60px"}}),"  "]}),e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#800080",color:"#fff",position:"sticky",top:0,zIndex:999},children:[e.jsx("th",{}),e.jsx("th",{children:"Unique ID"}),e.jsx("th",{children:"Screen Name"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Copy"})]})}),e.jsx("tbody",{children:j.map((n,r)=>{var s,c,a,k,g,m,v,I,N,$,F,A,R,U,_,z,E,P,T,D,H,L,M,W,B,q;try{const t=((s=n.event)==null?void 0:s.data)||n.event||{};if(!t)return null;const f=t.uniqueId||((c=t.user)==null?void 0:c.uniqueId)||((a=n.event)==null?void 0:a.uniqueId)||"Unknown",x=t.nickname||((k=t.user)==null?void 0:k.nickname)||((g=n.event)==null?void 0:g.nickname)||"Unknown";let u=t.comment||t.rawComment||t.giftName||((m=t.gift)==null?void 0:m.giftName)||((v=t.gift)==null?void 0:v.name)||((I=t.common)==null?void 0:I.giftName)||((N=t.common)==null?void 0:N.describe)||t.label||t.description||t.message||(($=t.subInfo)==null?void 0:$.describe)||((F=t.subInfo)==null?void 0:F.subLevelName)||"—";if(((R=((A=n.event)==null?void 0:A.type)||t.type)==null?void 0:R.toLowerCase())==="gift"){const o=t.giftName||((U=t.gift)==null?void 0:U.giftName)||((_=t.gift)==null?void 0:_.name)||((z=t.common)==null?void 0:z.giftName)||((E=t.common)==null?void 0:E.describe)||t.label||t.description||"Unknown Gift",i=((P=t.gift)==null?void 0:P.repeatCount)||t.repeatCount||1;u=`sent "${o}" x "${i}"`}const h=((D=(T=t.gift)==null?void 0:T.image)==null?void 0:D.url)||((L=(H=t.gift)==null?void 0:H.image)==null?void 0:L.src)||(Array.isArray((W=(M=t.gift)==null?void 0:M.image)==null?void 0:W.urls)?t.gift.image.urls[0]:"")||(Array.isArray((q=(B=t.gift)==null?void 0:B.image)==null?void 0:q.url_list)?t.gift.image.url_list[0]:"")||t.giftPictureUrl||"",K=h?`${f} | ${x} | ${u} | ${h}`:`${f} | ${x} | ${u}`;if(S){const o=p.trim(),i=y.trim(),G=o?d(f).includes(d(o))||d(x).includes(d(o)):!1,C=i?d(u).includes(d(i)):!1;if((o||i)&&!G&&!C)return null}return e.jsxs("tr",{style:{backgroundColor:"#2a2a2a",color:"#fff"},children:[e.jsx("td",{children:e.jsx(l.Suspense,{fallback:e.jsx("span",{style:{fontSize:"1.2rem"},children:"📌"}),children:e.jsx("button",{onClick:()=>{var i;const o=j.filter((G,C)=>C!==r);w(o),(i=window.electronAPI)==null||i.send("update-pinned-items",o)},style:{background:"none",border:"none",cursor:"pointer",color:"#FFA500"},children:e.jsx("span",{className:"material-icons",children:"push_pin"})})})}),e.jsx("td",{children:b(f,p)}),e.jsx("td",{children:b(x,p)}),e.jsxs("td",{style:{wordBreak:"break-word"},children:[b(u,y),h&&e.jsx("div",{style:{marginTop:"4px"},children:e.jsx("img",{src:h,alt:t.giftName||"Gift",style:{maxHeight:"40px",objectFit:"contain"}})})]}),e.jsx("td",{children:e.jsx(l.Suspense,{fallback:e.jsx("span",{className:"material-icons",style:{color:"#00FF00"},children:"content_copy"}),children:e.jsx("button",{onClick:()=>Y(K),style:{background:"none",border:"none",cursor:"pointer",color:"#00FF00",display:"flex",alignItems:"center",justifyContent:"center"},title:"Copy to clipboard",children:e.jsx("span",{className:"material-icons",children:"content_copy"})})})})]},`${f}-${r}`)}catch(t){return console.error("Error rendering pinned item:",t),null}})})]})})]})}const Z=document.getElementById("root"),ee=V(Z);ee.render(e.jsx(X,{}));
